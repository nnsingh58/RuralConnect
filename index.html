<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rural Connect</title>
    <!-- React and Babel via CDN -->
    <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.20.15/babel.min.js"></script>
    <!-- TailwindCSS via CDN -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Arial', sans-serif; background: linear-gradient(to bottom, #e0f2fe, #ffffff); }
        .header { @apply sticky top-0 bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg z-10 p-4 flex justify-between items-center; }
        .category-container { @apply bg-white p-6 rounded-xl shadow-lg mb-6 border border-gray-200; }
        .service-card { @apply bg-gray-50 p-4 m-2 rounded-lg shadow-md hover:shadow-xl transition transform hover:-translate-y-1; }
        .banner { @apply bg-gradient-to-r from-green-400 to-blue-500 text-white p-6 rounded-xl mb-6 font-semibold; }
        .language-toggle { @apply bg-indigo-700 text-white px-4 py-2 rounded-lg hover:bg-indigo-800; }
        .chatbot { @apply fixed bottom-6 right-6 bg-blue-600 text-white p-4 rounded-full shadow-xl hover:bg-blue-700; }
        .error-message { @apply text-red-600 p-4 text-center font-medium; }
        .main-content { @apply p-6; }
        .services-overview { @apply bg-gray-100 p-6 rounded-xl mb-6; }
        .footer { @apply bg-gray-800 text-white p-6 mt-6; }
        .form-input { @apply w-full p-3 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500; }
        .form-button { @apply bg-blue-600 text-white p-3 rounded-lg hover:bg-blue-700 w-full; }
        .table-container { @apply bg-white p-6 rounded-xl shadow-lg mb-6; }
        .status-pending { @apply text-yellow-600; }
        .status-completed { @apply text-green-600; }
        .status-dismissed { @apply text-red-600; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Mock User Data
        const mockUsers = {
            'mock-customer': { uid: 'mock-customer', phoneNumber: '+919876543210', role: 'customer' },
            'mock-provider': { uid: 'mock-provider', phoneNumber: '+919876543211', role: 'provider' },
            'mock-admin': { uid: 'mock-admin', phoneNumber: '+919876543212', role: 'admin' }
        };

        // Mock Backend (Local Storage)
        const saveProvider = (provider) => {
            const providers = JSON.parse(localStorage.getItem('providers') || '[]');
            providers.push({ ...provider, status: 'pending', availability: 'available' });
            localStorage.setItem('providers', JSON.stringify(providers));
        };

        const getProviders = () => {
            return JSON.parse(localStorage.getItem('providers') || '[]');
        };

        const updateProviderStatus = (phone, status) => {
            const providers = getProviders();
            const updated = providers.map(p => p.phone === phone ? { ...p, status } : p);
            localStorage.setItem('providers', JSON.stringify(updated));
        };

        const getBookings = () => {
            return JSON.parse(localStorage.getItem('bookings') || '[]');
        };

        const updateBookingStatus = (id, status, providerPhone = null, timeEstimate = null) => {
            const bookings = getBookings();
            const updated = bookings.map(b => b.id === id ? { ...b, status, providerPhone, timeEstimate } : b);
            localStorage.setItem('bookings', JSON.stringify(updated));
        };

        const addRating = (providerPhone, rating) => {
            const providers = getProviders();
            const updated = providers.map(p => p.phone === providerPhone ? { ...p, ratings: [...(p.ratings || []), rating] } : p);
            localStorage.setItem('providers', JSON.stringify(updated));
        };

        // Main App Component
        function App() {
            const [user, setUser] = useState(null);
            const [role, setRole] = useState('');
            const [language, setLanguage] = useState('en');
            const [searchQuery, setSearchQuery] = useState('');
            const [error, setError] = useState('');
            const [notifications, setNotifications] = useState([]);

            useEffect(() => {
                if (!user) {
                    setUser(mockUsers['mock-customer']);
                    setRole('customer');
                    console.log("Loaded mock user: customer");
                }
            }, []);

            const toggleLanguage = () => {
                setLanguage(language === 'en' ? 'hi' : 'en');
            };

            const handleSearch = (e) => {
                setSearchQuery(e.target.value);
            };

            const handleRoleChange = (selectedRole) => {
                setUser(mockUsers[`mock-${selectedRole}`]);
                setRole(selectedRole);
                console.log(`Switched to mock user: ${selectedRole}`);
            };

            const addNotification = (message) => {
                setNotifications([...notifications, message]);
                setTimeout(() => setNotifications(n => n.slice(1)), 5000);
            };

            if (error) {
                return <div className="error-message">{error}</div>;
            }

            return (
                <div className="min-h-screen">
                    <div className="header">
                        <select
                            value={role}
                            onChange={(e) => handleRoleChange(e.target.value)}
                            className="p-2 border rounded bg-white text-gray-800"
                        >
                            <option value="customer">{language === 'en' ? 'Customer' : '‡§ó‡•ç‡§∞‡§æ‡§π‡§ï'}</option>
                            <option value="provider">{language === 'en' ? 'Service Provider' : '‡§∏‡•á‡§µ‡§æ ‡§™‡•ç‡§∞‡§¶‡§æ‡§§‡§æ'}</option>
                            <option value="admin">{language === 'en' ? 'Admin' : '‡§™‡•ç‡§∞‡§∂‡§æ‡§∏‡§ï'}</option>
                        </select>
                        <button onClick={toggleLanguage} className="language-toggle">
                            {language === 'en' ? '‡§π‡§ø‡§®‡•ç‡§¶‡•Ä' : 'English'}
                        </button>
                    </div>
                    <div className="main-content">
                        <ServicesOverview language={language} />
                        {notifications.map((n, i) => (
                            <div key={i} className="bg-blue-100 text-blue-800 p-2 mb-2 rounded">
                                {n}
                            </div>
                        ))}
                        {user ? (
                            role === 'provider' ? (
                                <ProviderDashboard language={language} addNotification={addNotification} />
                            ) : role === 'admin' ? (
                                <AdminPanel language={language} addNotification={addNotification} />
                            ) : (
                                <CustomerDashboard 
                                    language={language} 
                                    searchQuery={searchQuery} 
                                    handleSearch={handleSearch} 
                                    addNotification={addNotification}
                                />
                            )
                        ) : (
                            <div className="error-message">
                                {language === 'en' ? 'Loading user...' : '‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...'}
                            </div>
                        )}
                        <Footer language={language} />
                    </div>
                </div>
            );
        }

        // Services Overview
        function ServicesOverview({ language }) {
            return (
                <div className="services-overview">
                    <h2 className="text-2xl font-bold mb-4">
                        {language === 'en' ? 'Our Services' : '‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Å'}
                    </h2>
                    <p className="text-gray-700">
                        {language === 'en' 
                            ? 'Rural Connect offers a wide range of services including home appliance repair, construction, rural specialty services, and more. Book now to connect with trusted providers!' 
                            : '‡§∞‡•Ç‡§∞‡§≤ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§µ‡§ø‡§≠‡§ø‡§®‡•ç‡§® ‡§∏‡•á‡§µ‡§æ‡§è‡§Å ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡§§‡§æ ‡§π‡•à, ‡§ú‡§ø‡§∏‡§Æ‡•á‡§Ç ‡§ò‡§∞‡•á‡§≤‡•Ç ‡§â‡§™‡§ï‡§∞‡§£ ‡§Æ‡§∞‡§Æ‡•ç‡§Æ‡§§, ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£, ‡§ó‡•ç‡§∞‡§æ‡§Æ‡•Ä‡§£ ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§∏‡•á‡§µ‡§æ‡§è‡§Å ‡§î‡§∞ ‡§¨‡§π‡•Å‡§§ ‡§ï‡•Å‡§õ ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•à‡§Ç‡•§ ‡§µ‡§ø‡§∂‡•ç‡§µ‡§∏‡§®‡•Ä‡§Ø ‡§™‡•ç‡§∞‡§¶‡§æ‡§§‡§æ‡§ì‡§Ç ‡§∏‡•á ‡§ú‡•Å‡§°‡§º‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§≠‡•Ä ‡§¨‡•Å‡§ï ‡§ï‡§∞‡•á‡§Ç!'}
                    </p>
                </div>
            );
        }

        // Customer Dashboard
        function CustomerDashboard({ language, searchQuery, handleSearch, addNotification }) {
            const categories = [
                {
                    name: language === 'en' ? 'Home Appliance Repair' : '‡§ò‡§∞‡•á‡§≤‡•Ç ‡§â‡§™‡§ï‡§∞‡§£ ‡§Æ‡§∞‡§Æ‡•ç‡§Æ‡§§',
                    icon: 'üîß',
                    services: [
                        'Fridge Repair', 'AC Repair', 'Washing Machine Repair', 'Cooler Repair',
                        'Ceiling Fan', 'Standing Fan', 'Submersible Pump'
                    ]
                },
                {
                    name: language === 'en' ? 'Electronics & Entertainment' : '‡§á‡§≤‡•á‡§ï‡•ç‡§ü‡•ç‡§∞‡•â‡§®‡§ø‡§ï‡•ç‡§∏ ‡§î‡§∞ ‡§Æ‡§®‡•ã‡§∞‡§Ç‡§ú‡§®',
                    icon: 'üì∫',
                    services: ['TV Repair', 'Radio Repair', 'LED Repair', 'Music System Repair']
                },
                {
                    name: language === 'en' ? 'Construction & Maintenance' : '‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£ ‡§î‡§∞ ‡§∞‡§ñ‡§∞‡§ñ‡§æ‡§µ',
                    icon: 'üè†',
                    services: [
                        'Plumber', 'Borewell Expert', 'POP/Wall Painter', 'Mason',
                        'Labor Provider', 'Transport Services'
                    ]
                },
                {
                    name: language === 'en' ? 'Rural Specialty Services' : '‡§ó‡•ç‡§∞‡§æ‡§Æ‡•Ä‡§£ ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§∏‡•á‡§µ‡§æ‡§è‡§Å',
                    icon: 'üöú',
                    services: [
                        'Agricultural Equipment Repair', 'Tractor/Trolley Mechanic', 'Livestock Care Services'
                    ]
                },
                {
                    name: language === 'en' ? 'Emergency Services' : '‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡•á‡§µ‡§æ‡§è‡§Å',
                    icon: '‚ö°',
                    services: ['Electrician', 'Well Repair', 'Urgent Plumber']
                }
            ];

            const handleBookNow = (service) => {
                window.location.href = `booking-form.html?service=${encodeURIComponent(service)}`;
            };

            const bookings = getBookings().filter(b => b.phone === mockUsers['mock-customer'].phoneNumber);
            const providers = getProviders();

            return (
                <div>
                    <div className="banner">
                        {language === 'en' ? 'Special Offer: 10% OFF on First Booking!' : '‡§µ‡§ø‡§∂‡•á‡§∑ ‡§ë‡§´‡§∞: ‡§™‡§π‡§≤‡•Ä ‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§™‡§∞ 10% ‡§õ‡•Ç‡§ü!'}
                    </div>
                    <input
                        type="text"
                        placeholder={language === 'en' ? 'Search services or voice search...' : '‡§∏‡•á‡§µ‡§æ‡§è‡§Å ‡§ñ‡•ã‡§ú‡•á‡§Ç ‡§Ø‡§æ ‡§µ‡•â‡§Ø‡§∏ ‡§∏‡§∞‡•ç‡§ö...'}
                        value={searchQuery}
                        onChange={handleSearch}
                        className="form-input"
                    />
                    <button className="form-button mb-4">
                        {language === 'en' ? 'Voice Search' : '‡§µ‡•â‡§Ø‡§∏ ‡§∏‡§∞‡•ç‡§ö'}
                    </button>
                    {categories.map((category) => (
                        <div key={category.name} className="category-container">
                            <h3 className="text-xl font-bold mb-2">{category.icon} {category.name}</h3>
                            <div className="grid grid-cols-2 md:grid-cols-3 gap-2">
                                {category.services
                                    .filter((service) => service.toLowerCase().includes(searchQuery.toLowerCase()))
                                    .map((service) => (
                                        <div key={service} className="service-card">
                                            <p className="font-medium">{service}</p>
                                            <button
                                                onClick={() => handleBookNow(service)}
                                                className="bg-green-500 text-white px-3 py-1 rounded-lg mt-2 hover:bg-green-600"
                                            >
                                                {language === 'en' ? 'Book Now' : '‡§Ö‡§≠‡•Ä ‡§¨‡•Å‡§ï ‡§ï‡§∞‡•á‡§Ç'}
                                            </button>
                                        </div>
                                    ))}
                            </div>
                        </div>
                    ))}
                    <div className="table-container">
                        <h3 className="text-xl font-bold mb-4">
                            {language === 'en' ? 'Your Bookings' : '‡§Ü‡§™‡§ï‡•Ä ‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó‡•ç‡§∏'}
                        </h3>
                        {bookings.length === 0 ? (
                            <p>{language === 'en' ? 'No bookings yet.' : '‡§Ö‡§≠‡•Ä ‡§§‡§ï ‡§ï‡•ã‡§à ‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§®‡§π‡•Ä‡§Ç‡•§'}</p>
                        ) : (
                            <table className="w-full border-collapse">
                                <thead>
                                    <tr className="bg-gray-200">
                                        <th className="p-2">{language === 'en' ? 'Service' : '‡§∏‡•á‡§µ‡§æ'}</th>
                                        <th className="p-2">{language === 'en' ? 'Status' : '‡§∏‡•ç‡§•‡§ø‡§§‡§ø'}</th>
                                        <th className="p-2">{language === 'en' ? 'Provider' : '‡§™‡•ç‡§∞‡§¶‡§æ‡§§‡§æ'}</th>
                                        <th className="p-2">{language === 'en' ? 'Time Estimate' : '‡§∏‡§Æ‡§Ø ‡§Ö‡§®‡•Å‡§Æ‡§æ‡§®'}</th>
                                        <th className="p-2">{language === 'en' ? 'Rating' : '‡§∞‡•á‡§ü‡§ø‡§Ç‡§ó'}</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {bookings.map(booking => {
                                        const provider = providers.find(p => p.phone === booking.providerPhone);
                                        return (
                                            <tr key={booking.id} className="border-b">
                                                <td className="p-2">{booking.service}</td>
                                                <td className={`p-2 status-${booking.status}`}>{booking.status}</td>
                                                <td className="p-2">{provider ? provider.name : 'Not Assigned'}</td>
                                                <td className="p-2">{booking.timeEstimate || 'N/A'}</td>
                                                <td className="p-2">
                                                    {booking.status === 'completed' && (
                                                        <select
                                                            onChange={(e) => {
                                                                addRating(booking.providerPhone, parseInt(e.target.value));
                                                                addNotification(language === 'en' ? 'Rating submitted!' : '‡§∞‡•á‡§ü‡§ø‡§Ç‡§ó ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡•Ä ‡§ó‡§à!');
                                                            }}
                                                            className="p-1 border rounded"
                                                        >
                                                            <option value="">{language === 'en' ? 'Rate' : '‡§∞‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç'}</option>
                                                            {[1, 2, 3, 4, 5].map(n => (
                                                                <option key={n} value={n}>{n} ‚òÖ</option>
                                                            ))}
                                                        </select>
                                                    )}
                                                </td>
                                            </tr>
                                        );
                                    })}
                                </tbody>
                            </table>
                        )}
                    </div>
                    <Chatbot language={language} />
                </div>
            );
        }

        // Provider Dashboard
        function ProviderDashboard({ language, addNotification }) {
            const [formData, setFormData] = useState({
                name: '',
                phone: '',
                address: '',
                skills: []
            });
            const [submitted, setSubmitted] = useState(false);
            const [availability, setAvailability] = useState('available');

            const skillsList = [
                'Fridge Repair', 'AC Repair', 'Plumber', 'Electrician', 'Mason',
                'Tractor Mechanic', 'Borewell Expert', 'Painter', 'Livestock Care'
            ];

            const handleInputChange = (e) => {
                const { name, value } = e.target;
                setFormData({ ...formData, [name]: value });
            };

            const handleSkillChange = (skill) => {
                const skills = formData.skills.includes(skill)
                    ? formData.skills.filter(s => s !== skill)
                    : [...formData.skills, skill];
                setFormData({ ...formData, skills });
            };

            const handleSubmit = () => {
                if (!formData.name || !formData.phone || !formData.address || formData.skills.length === 0) {
                    alert(language === 'en' ? 'Please fill all fields and select at least one skill.' : '‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§≠‡•Ä ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§≠‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ ‡§è‡§ï ‡§ï‡•å‡§∂‡§≤ ‡§ö‡•Å‡§®‡•á‡§Ç‡•§');
                    return;
                }
                saveProvider({ ...formData, phone: formData.phone });
                setSubmitted(true);
                addNotification(language === 'en' ? 'Registration submitted! Awaiting admin approval.' : '‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ! ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ‡§™‡§ï ‡§Ö‡§®‡•Å‡§Æ‡•ã‡§¶‡§® ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§π‡•à‡•§');
            };

            const bookings = getBookings().filter(b => b.providerPhone === mockUsers['mock-provider'].phoneNumber);

            if (submitted) {
                return (
                    <div>
                        <h2 className="text-2xl font-bold mb-4">
                            {language === 'en' ? 'Provider Dashboard' : '‡§∏‡•á‡§µ‡§æ ‡§™‡•ç‡§∞‡§¶‡§æ‡§§‡§æ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°'}
                        </h2>
                        <p className="text-green-600 mb-4">
                            {language === 'en' ? 'Your registration is pending approval.' : '‡§Ü‡§™‡§ï‡§æ ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§Ö‡§®‡•Å‡§Æ‡•ã‡§¶‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≤‡§Ç‡§¨‡§ø‡§§ ‡§π‡•à‡•§'}
                        </p>
                        <div className="table-container">
                            <h3 className="text-xl font-bold mb-4">
                                {language === 'en' ? 'Assigned Bookings' : '‡§Ü‡§µ‡§Ç‡§ü‡§ø‡§§ ‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó‡•ç‡§∏'}
                            </h3>
                            {bookings.length === 0 ? (
                                <p>{language === 'en' ? 'No bookings assigned.' : '‡§ï‡•ã‡§à ‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§Ü‡§µ‡§Ç‡§ü‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç‡•§'}</p>
                            ) : (
                                <table className="w-full border-collapse">
                                    <thead>
                                        <tr className="bg-gray-200">
                                            <th className="p-2">{language === 'en' ? 'Service' : '‡§∏‡•á‡§µ‡§æ'}</th>
                                            <th className="p-2">{language === 'en' ? 'Customer' : '‡§ó‡•ç‡§∞‡§æ‡§π‡§ï'}</th>
                                            <th className="p-2">{language === 'en' ? 'Status' : '‡§∏‡•ç‡§•‡§ø‡§§‡§ø'}</th>
                                            <th className="p-2">{language === 'en' ? 'Actions' : '‡§ï‡§æ‡§∞‡•ç‡§∞‡§µ‡§æ‡§á‡§Ø‡§æ‡§Å'}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {bookings.map(booking => (
                                            <tr key={booking.id} className="border-b">
                                                <td className="p-2">{booking.service}</td>
                                                <td className="p-2">{booking.name}</td>
                                                <td className={`p-2 status-${booking.status}`}>{booking.status}</td>
                                                <td className="p-2">
                                                    {booking.status === 'pending' && (
                                                        <div className="flex gap-2">
                                                            <button
                                                                onClick={() => {
                                                                    const timeEstimate = prompt(language === 'en' ? 'Enter time estimate (e.g., 2 hours)' : '‡§∏‡§Æ‡§Ø ‡§Ö‡§®‡•Å‡§Æ‡§æ‡§® ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç (‡§â‡§¶‡§æ‡§π‡§∞‡§£: 2 ‡§ò‡§Ç‡§ü‡•á)');
                                                                    if (timeEstimate) {
                                                                        updateBookingStatus(booking.id, 'accepted', mockUsers['mock-provider'].phoneNumber, timeEstimate);
                                                                        addNotification(language === 'en' ? `Accepted ${booking.service} with estimate: ${timeEstimate}` : `${booking.service} ‡§∏‡•ç‡§µ‡•Ä‡§ï‡§æ‡§∞ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ, ‡§Ö‡§®‡•Å‡§Æ‡§æ‡§®: ${timeEstimate}`);
                                                                    }
                                                                }}
                                                                className="bg-green-500 text-white p-1 rounded hover:bg-green-600"
                                                            >
                                                                {language === 'en' ? 'Accept' : '‡§∏‡•ç‡§µ‡•Ä‡§ï‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç'}
                                                            </button>
                                                            <button
                                                                onClick={() => {
                                                                    updateBookingStatus(booking.id, 'dismissed');
                                                                    addNotification(language === 'en' ? `Dismissed ${booking.service}` : `${booking.service} ‡§ñ‡§æ‡§∞‡§ø‡§ú ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ`);
                                                                }}
                                                                className="bg-red-500 text-white p-1 rounded hover:bg-red-600"
                                                            >
                                                                {language === 'en' ? 'Dismiss' : '‡§ñ‡§æ‡§∞‡§ø‡§ú ‡§ï‡§∞‡•á‡§Ç'}
                                                            </button>
                                                        </div>
                                                    )}
                                                    {booking.status === 'accepted' && (
                                                        <button
                                                            onClick={() => {
                                                                updateBookingStatus(booking.id, 'completed');
                                                                addNotification(language === 'en' ? `Completed ${booking.service}` : `${booking.service} ‡§™‡•Ç‡§∞‡§æ ‡§π‡•Å‡§Ü`);
                                                            }}
                                                            className="bg-blue-500 text-white p-1 rounded hover:bg-blue-600"
                                                        >
                                                            {language === 'en' ? 'Mark Completed' : '‡§™‡•Ç‡§∞‡§æ ‡§π‡•Å‡§Ü ‡§ö‡§ø‡§π‡•ç‡§®‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç'}
                                                        </button>
                                                    )}
                                                </td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            )}
                        </div>
                    </div>
                );
            }

            return (
                <div>
                    <h2 className="text-2xl font-bold mb-4">
                        {language === 'en' ? 'Provider Registration' : '‡§∏‡•á‡§µ‡§æ ‡§™‡•ç‡§∞‡§¶‡§æ‡§§‡§æ ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£'}
                    </h2>
                    <div className="bg-white p-6 rounded-xl shadow-lg">
                        <input
                            type="text"
                            name="name"
                            placeholder={language === 'en' ? 'Full Name' : '‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ'}
                            value={formData.name}
                            onChange={handleInputChange}
                            className="form-input"
                        />
                        <input
                            type="text"
                            name="phone"
                            placeholder={language === 'en' ? 'Phone Number' : '‡§´‡•ã‡§® ‡§®‡§Ç‡§¨‡§∞'}
                            value={formData.phone}
                            onChange={handleInputChange}
                            className="form-input"
                        />
                        <input
                            type="text"
                            name="address"
                            placeholder={language === 'en' ? 'Address' : '‡§™‡§§‡§æ'}
                            value={formData.address}
                            onChange={handleInputChange}
                            className="form-input"
                        />
                        <h3 className="text-lg font-semibold mb-2">
                            {language === 'en' ? 'Select Skills' : '‡§ï‡•å‡§∂‡§≤ ‡§ö‡•Å‡§®‡•á‡§Ç'}
                        </h3>
                        <div className="grid grid-cols-2 gap-2 mb-4">
                            {skillsList.map(skill => (
                                <label key={skill} className="flex items-center">
                                    <input
                                        type="checkbox"
                                        checked={formData.skills.includes(skill)}
                                        onChange={() => handleSkillChange(skill)}
                                        className="mr-2"
                                    />
                                    {skill}
                                </label>
                            ))}
                        </div>
                        <button onClick={handleSubmit} className="form-button">
                            {language === 'en' ? 'Register Now' : '‡§Ö‡§≠‡•Ä ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§ï‡§∞‡•á‡§Ç'}
                        </button>
                    </div>
                    <div className="mt-4">
                        <label className="flex items-center">
                            <span className="mr-2">{language === 'en' ? 'Availability' : '‡§â‡§™‡§≤‡§¨‡•ç‡§ß‡§§‡§æ'}</span>
                            <select
                                value={availability}
                                onChange={(e) => setAvailability(e.target.value)}
                                className="p-2 border rounded"
                            >
                                <option value="available">{language === 'en' ? 'Available' : '‡§â‡§™‡§≤‡§¨‡•ç‡§ß'}</option>
                                <option value="busy">{language === 'en' ? 'Busy' : '‡§µ‡•ç‡§Ø‡§∏‡•ç‡§§'}</option>
                            </select>
                        </label>
                    </div>
                </div>
            );
        }

        // Admin Panel
        function AdminPanel({ language, addNotification }) {
            const [providers, setProviders] = useState(getProviders());
            const bookings = getBookings();

            const handleApproval = (phone, status) => {
                updateProviderStatus(phone, status);
                setProviders(getProviders());
                addNotification(language === 'en' 
                    ? `Provider ${status === 'approved' ? 'approved' : 'rejected'}!` 
                    : `‡§™‡•ç‡§∞‡§¶‡§æ‡§§‡§æ ${status === 'approved' ? '‡§∏‡•ç‡§µ‡•Ä‡§ï‡•É‡§§' : '‡§Ö‡§∏‡•ç‡§µ‡•Ä‡§ï‡•É‡§§'}!`);
            };

            const handleComplaint = (bookingId, action) => {
                const booking = bookings.find(b => b.id === bookingId);
                if (action === 'accept') {
                    const timeEstimate = prompt(language === 'en' ? 'Enter time estimate for resolution (e.g., 2 hours)' : '‡§∏‡§Æ‡§æ‡§ß‡§æ‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§Æ‡§Ø ‡§Ö‡§®‡•Å‡§Æ‡§æ‡§® ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç (‡§â‡§¶‡§æ‡§π‡§∞‡§£: 2 ‡§ò‡§Ç‡§ü‡•á)');
                    if (timeEstimate) {
                        updateBookingStatus(bookingId, 'accepted', booking.providerPhone, timeEstimate);
                        addNotification(language === 'en' 
                            ? `Complaint for ${booking.service} accepted with estimate: ${timeEstimate}` 
                            : `${booking.service} ‡§ï‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§∏‡•ç‡§µ‡•Ä‡§ï‡§æ‡§∞ ‡§ï‡•Ä ‡§ó‡§à, ‡§Ö‡§®‡•Å‡§Æ‡§æ‡§®: ${timeEstimate}`);
                    }
                } else {
                    updateBookingStatus(bookingId, 'dismissed');
                    addNotification(language === 'en' 
                        ? `Complaint for ${booking.service} dismissed` 
                        : `${booking.service} ‡§ï‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§ñ‡§æ‡§∞‡§ø‡§ú ‡§ï‡•Ä ‡§ó‡§à`);
                }
            };

            return (
                <div>
                    <h2 className="text-2xl font-bold mb-4">
                        {language === 'en' ? 'Admin Panel' : '‡§™‡•ç‡§∞‡§∂‡§æ‡§∏‡§® ‡§™‡•à‡§®‡§≤'}
                    </h2>
                    <div className="table-container">
                        <h3 className="text-lg font-semibold mb-2">
                            {language === 'en' ? 'Manage Providers' : '‡§™‡•ç‡§∞‡§¶‡§æ‡§§‡§æ‡§ì‡§Ç ‡§ï‡•ã ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç'}
                        </h3>
                        {providers.length === 0 ? (
                            <p>{language === 'en' ? 'No providers registered.' : '‡§ï‡•ã‡§à ‡§™‡•ç‡§∞‡§¶‡§æ‡§§‡§æ ‡§™‡§Ç‡§ú‡•Ä‡§ï‡•É‡§§ ‡§®‡§π‡•Ä‡§Ç‡•§'}</p>
                        ) : (
                            <table className="w-full border-collapse">
                                <thead>
                                    <tr className="bg-gray-200">
                                        <th className="p-2">{language === 'en' ? 'Name' : '‡§®‡§æ‡§Æ'}</th>
                                        <th className="p-2">{language === 'en' ? 'Phone' : '‡§´‡•ã‡§®'}</th>
                                        <th className="p-2">{language === 'en' ? 'Skills' : '‡§ï‡•å‡§∂‡§≤'}</th>
                                        <th className="p-2">{language === 'en' ? 'Status' : '‡§∏‡•ç‡§•‡§ø‡§§‡§ø'}</th>
                                        <th className="p-2">{language === 'en' ? 'Actions' : '‡§ï‡§æ‡§∞‡•ç‡§∞‡§µ‡§æ‡§á‡§Ø‡§æ‡§Å'}</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {providers.map(provider => (
                                        <tr key={provider.phone} className="border-b">
                                            <td className="p-2">{provider.name}</td>
                                            <td className="p-2">{provider.phone}</td>
                                            <td className="p-2">{provider.skills.join(', ')}</td>
                                            <td className={`p-2 status-${provider.status}`}>{provider.status}</td>
                                            <td className="p-2">
                                                {provider.status === 'pending' && (
                                                    <div className="flex gap-2">
                                                        <button
                                                            onClick={() => handleApproval(provider.phone, 'approved')}
                                                            className="bg-green-500 text-white p-1 rounded hover:bg-green-600"
                                                        >
                                                            {language === 'en' ? 'Approve' : '‡§∏‡•ç‡§µ‡•Ä‡§ï‡•É‡§§ ‡§ï‡§∞‡•á‡§Ç'}
                                                        </button>
                                                        <button
                                                            onClick={() => handleApproval(provider.phone, 'rejected')}
                                                            className="bg-red-500 text-white p-1 rounded hover:bg-red-600"
                                                        >
                                                            {language === 'en' ? 'Reject' : '‡§Ö‡§∏‡•ç‡§µ‡•Ä‡§ï‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç'}
                                                        </button>
                                                    </div>
                                                )}
                                            </td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        )}
                    </div>
                    <div className="table-container">
                        <h3 className="text-lg font-semibold mb-2">
                            {language === 'en' ? 'Manage Bookings' : '‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó‡•ç‡§∏ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç'}
                        </h3>
                        {bookings.length === 0 ? (
                            <p>{language === 'en' ? 'No bookings recorded.' : '‡§ï‡•ã‡§à ‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§¶‡§∞‡•ç‡§ú ‡§®‡§π‡•Ä‡§Ç‡•§'}</p>
                        ) : (
                            <table className="w-full border-collapse">
                                <thead>
                                    <tr className="bg-gray-200">
                                        <th className="p-2">{language === 'en' ? 'Service' : '‡§∏‡•á‡§µ‡§æ'}</th>
                                        <th className="p-2">{language === 'en' ? 'Customer' : '‡§ó‡•ç‡§∞‡§æ‡§π‡§ï'}</th>
                                        <th className="p-2">{language === 'en' ? 'Provider' : '‡§™‡•ç‡§∞‡§¶‡§æ‡§§‡§æ'}</th>
                                        <th className="p-2">{language === 'en' ? 'Status' : '‡§∏‡•ç‡§•‡§ø‡§§‡§ø'}</th>
                                        <th className="p-2">{language === 'en' ? 'Time Estimate' : '‡§∏‡§Æ‡§Ø ‡§Ö‡§®‡•Å‡§Æ‡§æ‡§®'}</th>
                                        <th className="p-2">{language === 'en' ? 'Complaint' : '‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§'}</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {bookings.map(booking => {
                                        const provider = providers.find(p => p.phone === booking.providerPhone);
                                        return (
                                            <tr key={booking.id} className="border-b">
                                                <td className="p-2">{booking.service}</td>
                                                <td className="p-2">{booking.name}</td>
                                                <td className="p-2">{provider ? provider.name : 'Not Assigned'}</td>
                                                <td className={`p-2 status-${booking.status}`}>{booking.status}</td>
                                                <td className="p-2">{booking.timeEstimate || 'N/A'}</td>
                                                <td className="p-2">
                                                    <div className="flex gap-2">
                                                        <button
                                                            onClick={() => handleComplaint(booking.id, 'accept')}
                                                            className="bg-blue-500 text-white p-1 rounded hover:bg-blue-600"
                                                        >
                                                            {language === 'en' ? 'Accept' : '‡§∏‡•ç‡§µ‡•Ä‡§ï‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç'}
                                                        </button>
                                                        <button
                                                            onClick={() => handleComplaint(booking.id, 'dismiss')}
                                                            className="bg-red-500 text-white p-1 rounded hover:bg-red-600"
                                                        >
                                                            {language === 'en' ? 'Dismiss' : '‡§ñ‡§æ‡§∞‡§ø‡§ú ‡§ï‡§∞‡•á‡§Ç'}
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                        );
                                    })}
                                </tbody>
                            </table>
                        )}
                    </div>
                </div>
            );
        }

        // Chatbot Component
        function Chatbot({ language }) {
            return (
                <div className="chatbot">
                    <p>{language === 'en' ? 'Chat with us!' : '‡§π‡§Æ‡§∏‡•á ‡§ö‡•à‡§ü ‡§ï‡§∞‡•á‡§Ç!'}</p>
                </div>
            );
        }

        // Footer Component
        function Footer({ language }) {
            return (
                <div className="footer">
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <h3 className="text-lg font-semibold mb-2">
                                {language === 'en' ? 'About Rural Connect' : '‡§∞‡•Ç‡§∞‡§≤ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç'}
                            </h3>
                            <p>
                                {language === 'en' 
                                    ? 'Connecting rural communities with trusted service providers for home, farm, and emergency needs.' 
                                    : '‡§ó‡•ç‡§∞‡§æ‡§Æ‡•Ä‡§£ ‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§ò‡§∞, ‡§ñ‡•á‡§§ ‡§î‡§∞ ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§ú‡§∞‡•Ç‡§∞‡§§‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§µ‡§ø‡§∂‡•ç‡§µ‡§∏‡§®‡•Ä‡§Ø ‡§∏‡•á‡§µ‡§æ ‡§™‡•ç‡§∞‡§¶‡§æ‡§§‡§æ‡§ì‡§Ç ‡§∏‡•á ‡§ú‡•ã‡§°‡§º‡§®‡§æ‡•§'}
                            </p>
                        </div>
                        <div>
                            <h3 className="text-lg font-semibold mb-2">
                                {language === 'en' ? 'Contact Us' : '‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç'}
                            </h3>
                            <p>Email: support@ruralconnect.in</p>
                            <p>Phone: +91 9876543210</p>
                        </div>
                        <div>
                            <h3 className="text-lg font-semibold mb-2">
                                {language === 'en' ? 'Links' : '‡§≤‡§ø‡§Ç‡§ï'}
                            </h3>
                            <p><a href="#" className="hover:underline">Privacy Policy</a></p>
                            <p><a href="#" className="hover:underline">Terms of Service</a></p>
                        </div>
                    </div>
                    <p className="text-center mt-4">
                        ¬© 2025 Rural Connect. {language === 'en' ? 'All rights reserved.' : '‡§∏‡§≠‡•Ä ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§‡•§'}
                    </p>
                </div>
            );
        }

        // Render the App with Error Boundary
        class ErrorBoundary extends React.Component {
            state = { error: null };
            static getDerivedStateFromError(error) {
                return { error: error.message };
            }
            render() {
                if (this.state.error) {
                    return <div className="error-message">Error: {this.state.error}</div>;
                }
                return this.props.children;
            }
        }

        // Use createRoot for React 18
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(
            <ErrorBoundary>
                <App />
            </ErrorBoundary>
        );

        // PWA Service Worker
        if ('serviceWorker' in navigator && window.location.protocol === 'https:') {
            navigator.serviceWorker.register('/sw.js')
                .then(() => console.log('Service Worker Registered'))
                .catch((error) => console.log('Service Worker Registration Failed:', error));
        }
    </script>
</body>
</html>
